# Реализация сброса пароля

## Обзор

Реализован полный функционал сброса пароля с использованием OTP (One-Time Password) верификации, основанный на спецификации API из `RESET_PASSWORD_API_EXAMPLE.md`.

## Компоненты

### 1. API Клиент (`src/services/resetPasswordApiClient.ts`)

- `sendResetOTP(email)` - отправка OTP кода на email
- `verifyOTP(token, code)` - верификация OTP кода
- `resetPassword(otpToken, newPassword, confirmPassword)` - сброс пароля
- `resetPasswordFlow(email, otpCode, newPassword)` - полный flow сброса пароля

### 2. User Store (`src/stores/user.ts`)

Добавлены методы:
- `sendResetPasswordOTP(email)` - отправка OTP для сброса пароля
- `verifyResetPasswordOTP(token, code)` - верификация OTP
- `resetPassword(otpToken, newPassword, confirmPassword)` - сброс пароля

### 3. Страница сброса пароля (`src/pages/ResetPasswordPage.vue`)

Многошаговый процесс:
1. **Ввод email** - пользователь вводит email для получения OTP
2. **Ввод OTP** - пользователь вводит код подтверждения
3. **Новый пароль** - пользователь создает новый пароль
4. **Успех** - подтверждение успешного сброса пароля

### 4. Роутинг (`src/router/index.ts`)

Добавлен маршрут `/reset-password` с мета-данными:
- `requiresAuth: false` - не требует авторизации
- `hideForAuth: true` - скрыт для авторизованных пользователей

### 5. Ссылка на сброс пароля (`src/pages/LoginPage.vue`)

Добавлена ссылка "Забыли пароль?" на страницу сброса пароля.

## Поток работы

1. Пользователь нажимает "Забыли пароль?" на странице входа
2. Переходит на `/reset-password`
3. Вводит email и нажимает "Отправить код"
4. Вводит полученный OTP код
5. Создает новый пароль с индикатором силы
6. Получает подтверждение успешного сброса
7. Переходит обратно на страницу входа

## Особенности

- **Валидация пароля**: индикатор силы пароля с визуальной обратной связью
- **Повторная отправка OTP**: возможность повторно отправить код
- **Отмена процесса**: возможность вернуться к началу
- **Обработка ошибок**: детальные сообщения об ошибках
- **Responsive дизайн**: адаптивный интерфейс для всех устройств
- **Темная тема**: поддержка темной темы

## Безопасность

- OTP токены одноразовые и имеют ограниченное время жизни
- Валидация пароля на клиенте и сервере
- Нет требования авторизации для сброса пароля
- Проверка существования пользователя перед отправкой OTP

## API Endpoints

- `POST /web/otp/send` - отправка OTP
- `POST /web/otp/verify` - верификация OTP
- `POST /web/users/reset-password` - сброс пароля

Все endpoints соответствуют спецификации из `RESET_PASSWORD_API_EXAMPLE.md`.
