# Система приглашений

## Обзор

Система приглашений позволяет управлять приглашениями для регистрации новых пользователей в платформе. Пользователи могут создавать, просматривать, редактировать и удалять приглашения для клиентов и специалистов.

## Структура

### Типы (`src/types/invitation.ts`)
- `ApiInvitation` - формат данных с API
- `Invitation` - формат данных для фронтенда
- `InvitationSearchFilters` - фильтры для поиска
- `InvitationPaginationResponse` - ответ с пагинацией
- `CreateInvitationRequest` / `UpdateInvitationRequest` - запросы на создание/обновление

### API Клиент (`src/services/invitationApiClient.ts`)
- Наследуется от `AuthApiClient`
- Поддерживает CRUD операции
- Конвертирует данные между API и фронтенд форматами
- Поддерживает пагинацию и фильтрацию

### Store (`src/stores/invitation.ts`)
- Управление состоянием приглашений
- Поддержка infinite scroll
- Обработка ошибок
- Кэширование результатов поиска

### Компоненты

#### `InvitationSearchFilters.vue`
- Фильтры по типу пользователя (клиент/специалист)
- Фильтры по статусу (активно/неактивно)
- Кнопки поиска и очистки

#### `InvitationSearchResults.vue`
- Отображение списка приглашений
- Состояния загрузки, ошибок, пустого списка
- Поддержка infinite scroll
- Обработка действий (просмотр, редактирование, удаление)

#### `InvitationCard.vue`
- Карточка отдельного приглашения в табличном формате
- Отображение: тип пользователя, статус, количество регистраций, дата истечения, дата создания
- Кнопка "Копировать ссылку" для копирования ссылки на приглашение в буфер обмена
- Формат ссылки: `{currentSchema}://{currentDomain}/invite/{id}?token={token}`

### Страница (`src/pages/AllInvitationsPage.vue`)
- Главная страница управления приглашениями
- Интеграция всех компонентов
- Обработка событий и навигации

## API Endpoints

- `GET /api/web/invitations` - получение списка приглашений
- `GET /api/web/invitations/{id}` - получение приглашения по ID
- `POST /api/web/invitations` - создание приглашения
- `PATCH /api/web/invitations/{id}` - обновление приглашения
- `DELETE /api/web/invitations/{id}` - удаление приглашения

## Маршрутизация

- `/invitations` - страница со списком всех приглашений

## Особенности

1. **Infinite Scroll** - автоматическая подгрузка при прокрутке
2. **Фильтрация** - по типу пользователя и статусу
3. **Кнопка "Копировать ссылку"** - копирование ссылки на приглашение одним кликом
4. **Табличный формат** - компактное отображение всех важных данных
5. **Автоматическая генерация ссылок** - на основе текущего домена и протокола
6. **Обработка ошибок** - с возможностью повтора
7. **Адаптивный дизайн** - поддержка мобильных устройств

## Тестирование

Создан базовый набор тестов в `tests/stores/invitation.test.ts` для проверки функциональности store.
